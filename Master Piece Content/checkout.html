<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>FAID</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500;600;700&family=Open+Sans:wght@400;500&display=swap" rel="stylesheet">  

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css" />


    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/5.3.45/css/materialdesignicons.css" integrity="sha256-NAxhqDvtY0l4xn+YVa6WjAcmd94NNfttjNsDmNatFVc=" crossorigin="anonymous" />
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

<style>


.card {
    margin-bottom: 24px;
    -webkit-box-shadow: 0 2px 3px #e4e8f0;
    box-shadow: 0 2px 3px #e4e8f0;
}
.card {
    position: relative;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -ms-flex-direction: column;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 1px solid #eff0f2;
    border-radius: 1rem;
}
.activity-checkout {
    list-style: none
}

.activity-checkout .checkout-icon {
    position: absolute;
    top: -4px;
    left: -24px
}

.activity-checkout .checkout-item {
    position: relative;
    padding-bottom: 24px;
    padding-left: 35px;
    border-left: 2px solid #f5f6f8
}

.activity-checkout .checkout-item:first-child {
    border-color: #3b76e1
}

.activity-checkout .checkout-item:first-child:after {
    background-color: #3b76e1
}

.activity-checkout .checkout-item:last-child {
    border-color: transparent
}

.activity-checkout .checkout-item.crypto-activity {
    margin-left: 50px
}

.activity-checkout .checkout-item .crypto-date {
    position: absolute;
    top: 3px;
    left: -65px
}



.avatar-xs {
    height: 1rem;
    width: 1rem
}

.avatar-sm {
    height: 2rem;
    width: 2rem
}

.avatar {
    height: 3rem;
    width: 3rem
}

.avatar-md {
    height: 4rem;
    width: 4rem
}

.avatar-lg {
    height: 5rem;
    width: 5rem
}

.avatar-xl {
    height: 6rem;
    width: 6rem
}

.avatar-title {
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    background-color: #3b76e1;
    color: #fff;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    font-weight: 500;
    height: 100%;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
    width: 100%
}

.avatar-group {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    padding-left: 8px
}

.avatar-group .avatar-group-item {
    margin-left: -8px;
    border: 2px solid #fff;
    border-radius: 50%;
    -webkit-transition: all .2s;
    transition: all .2s
}

.avatar-group .avatar-group-item:hover {
    position: relative;
    -webkit-transform: translateY(-2px);
    transform: translateY(-2px)
}

.card-radio {
    background-color: #fff;
    border: 2px solid #eff0f2;
    border-radius: .75rem;
    padding: .5rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    display: block
}

.card-radio:hover {
    cursor: pointer
}

.card-radio-label {
    display: block
}

.edit-btn {
    width: 35px;
    height: 35px;
    line-height: 40px;
    text-align: center;
    position: absolute;
    right: 25px;
    margin-top: -50px
}

.card-radio-input {
    display: none
}

.card-radio-input:checked+.card-radio {
    border-color: #3b76e1!important
}


.font-size-16 {
    font-size: 16px!important;
}
.text-truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

a {
    text-decoration: none!important;
}


.form-control {
    display: block;
    width: 100%;
    padding: 0.47rem 0.75rem;
    font-size: .875rem;
    font-weight: 400;
    line-height: 1.5;
    color: #545965;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #e2e5e8;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0.75rem;
    -webkit-transition: border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;
    transition: border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;
}

.edit-btn {
    width: 35px;
    height: 35px;
    line-height: 40px;
    text-align: center;
    position: absolute;
    right: 25px;
    margin-top: -50px;
}

.ribbon {
    position: absolute;
    right: -26px;
    top: 20px;
    -webkit-transform: rotate(45deg);
    transform: rotate(45deg);
    color: #fff;
    font-size: 13px;
    font-weight: 500;
    padding: 1px 22px;
    font-size: 13px;
    font-weight: 500
}


#paypal-button-container {
  margin-top: 20px;
  text-align: center;
}

</style>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;"></div>
    </div>
    <!-- Spinner End -->


    <!-- Topbar Start -->
    <div class="container-fluid bg-dark text-light px-0 py-2">
        <div class="row gx-0 d-none d-lg-flex">
            <div class="col-lg-7 px-5 text-start">
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <span class="fa fa-phone-alt me-2"></span>
                    <span>+962 7 9700 0000</span>
                </div>
                <div class="h-100 d-inline-flex align-items-center">
                    <span class="far fa-envelope me-2"></span>
                    <span>Faid@jo.com</span>
                </div>
            </div>
            <div class="col-lg-5 px-5 text-end">
                <div class="h-100 d-inline-flex align-items-center mx-n2">
                    <span>Follow Us:</span>
                    <a class="btn btn-link text-light" href=""><i class="fab fa-facebook-f"></i></a>
                    <a class="btn btn-link text-light" href=""><i class="fab fa-twitter"></i></a>
                    <a class="btn btn-link text-light" href=""><i class="fab fa-linkedin-in"></i></a>
                    <a class="btn btn-link text-light" href=""><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->


   <!-- Navbar Start -->
   <nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top p-0">
    <a href="index.html" class="navbar-brand d-flex align-items-center px-4 px-lg-5">
        <h1 class="m-0">FAI<span style="color: #FFC107;">D</span></h1>
    </a>
    <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto p-4 p-lg-0" id="navbar-links">
            <a href="index.html" class="nav-item nav-link active">Home</a>
            <a href="about.html" class="nav-item nav-link">About</a>
            <a href="service.html" class="nav-item nav-link">Services</a>
            <a href="contact.html" class="nav-item nav-link">Contact</a>
            <a href="storelist.html" class="nav-item nav-link active">Deals</a>
           
            <a href="myaccount.html" id="profileLink1" class="nav-item nav-link active" style="display:none;">Profile </a>
        <a href="RestAccount.html" id="profileLink2" class="nav-item nav-link active" style="display:none;">Profile </a>
        <a href="cart.html" id="cartLink" class="nav-item nav-link active" style="display:none;">Cart</a>

        <a href="donate.html" class="nav-item nav-link" style="color:#FFC107; font-weight: bold;">Donate</a>

        <!-- Join Us Button (Visible by default) -->
        <a href="login.html" id="authButton" class="btn btn-primary py-4 px-lg-4 rounded-0 d-none d-lg-block">Join us
            <i class="fa fa-arrow-right ms-3"></i></a>
</nav>
<!-- Navbar End -->
<br /><br /><br />
<!-- Checkout-->


<div class="container">

    <div class="row">
        <div class="col-xl-8">

            <div class="card">
                <div class="card-body">
                    <ol class="activity-checkout mb-0 px-4 mt-3">
                        <li class="checkout-item">
                            <div class="avatar checkout-icon p-1">
                                <div class="avatar-title rounded-circle bg-primary">
                                    <i class="bx bxs-receipt text-white font-size-20"></i>
                                </div>
                            </div>
                            <div class="feed-item-list">
                                <div>
                                    <h5 class="font-size-16 mb-1">Billing Info</h5>
                                    <p class="text-muted text-truncate mb-4">Fill the form below to proceed</p>
                                    <div class="mb-3">
                                        <form>
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <div class="mb-3">
                                                        <label class="form-label" for="billing-name">Name</label>
                                                        <input type="text" class="form-control" id="billing-name" placeholder="Enter name">
                                                    </div>
                                                </div>
                                                <div class="col-lg-4">
                                                    <div class="mb-3">
                                                        <label class="form-label" for="billing-email-address">Email Address</label>
                                                        <input type="email" class="form-control" id="billing-email-address" placeholder="Enter email">
                                                    </div>
                                                </div>
                                                <div class="col-lg-4">
                                                    <div class="mb-3">
                                                        <label class="form-label" for="billing-phone">Phone</label>
                                                        <input type="text" class="form-control" id="billing-phone" placeholder="Enter Phone no.">
                                                    </div>
                                                </div>
                                            </div>
                            
                                            <div class="mb-3">
                                                <label class="form-label" for="">More Information</label>
                                                <textarea class="form-control" id="" rows="3" placeholder="Additional order instructions"></textarea>
                                            </div>
                            
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <div class="mb-4 mb-lg-0">
                                                        <label class="form-label" for="billing-city">City</label>
                                                        <input type="text" class="form-control" id="billing-city" placeholder="Enter City">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>                            
                        </li>
                        <li class="checkout-item">
                            <div class="feed-item-list">
                                <h5 class="font-size-16 mb-1">Shipping Info</h5>
                                <p class="text-muted text-truncate mb-4">Shipping Address:</p>
                                <label class="checkbox-container">
                                    <input type="checkbox" id="address-checkbox" class="form-check-input">
                                    <span class="checkmark"></span>
                                    <input type="text" id="billing-address" class="form-control address-field" placeholder="Address will appear here">
                                </label>
                            </div>                           
                        </li>
                        <li class="checkout-item">
                            <div class="avatar checkout-icon p-1">
                                <div class="avatar-title rounded-circle bg-primary">
                                    <i class="bx bxs-wallet-alt text-white font-size-20"></i>
                                </div>
                            </div>
                            <div class="feed-item-list">
                                <div>
                                    <h5 class="font-size-16 mb-1">Payment Info</h5>
                                    <p class="text-muted text-truncate mb-4">How would you pay?</p>
                                </div>
                                <div>
                                    <h5 class="font-size-14 mb-3">Payment method :</h5>
                                    <div class="row">
                                        <!-- PayPal Option -->
                                        <div class="col-lg-3 col-sm-6">
                                            <label class="card-radio-label">
                                                <input type="radio" name="pay-method" id="pay-methodoption2" class="card-radio-input" onclick="togglePaypalBtn()">
                                                <span class="card-radio py-3 text-center text-truncate">
                                                    <i class="bx bxl-paypal d-block h2 mb-3"></i>
                                                    Paypal
                                                </span>
                                            </label>
                                        </div>
                                
                                        <!-- Cash on Delivery Option -->
                                        <div class="col-lg-3 col-sm-6">
                                            <label class="card-radio-label">
                                                <input type="radio" name="pay-method" id="pay-methodoption3" class="card-radio-input" onclick="toggleCashOnDeliveryForm()">
                                                <span class="card-radio py-3 text-center text-truncate">
                                                    <i class="bx bx-money d-block h2 mb-3"></i>
                                                    <span>Cash on Delivery</span>
                                                </span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <!-- PayPal Button Container -->
                                    <!-- <div id="paypal-button-container" style="display: none;"></div>   -->
                                    <div id="cartItems"></div> <!-- Container for cart items -->
                                    <div id="totalAmount"></div> <!-- Element where total amount will be displayed -->
                                    <div id="paypal-button-container" style="display: none;"></div>
                                    <!-- Cash on Delivery Form -->
                                    <div id="cashOnDeliveryForm" class="d-none">
                                        <h5>Cash on Delivery Details</h5>
                                        <form>
                                            <div class="mb-3">
                                                <label for="recipientName" class="form-label">Recipient Name</label>
                                                <input type="text" class="form-control" id="recipientName" placeholder="Enter your name" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="recipientPhone" class="form-label">Phone Number</label>
                                                <input type="tel" class="form-control" id="recipientPhone" placeholder="Enter your phone number" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="deliveryAddress" class="form-label">Delivery Address</label>
                                                <input type="text" class="form-control" id="deliveryAddress" placeholder="Enter your delivery address" required>
                                            </div>
                                            <button type="submit" class="btn btn-primary">Confirm Cash on Delivery</button>
                                        </form>
                                    </div>
                                </div>
                                
                            </div>
                        </li>
                    </ol>
                </div>
            </div>

            <div class="row my-4">
                <div class="col">
                    <a href="shop.html" class="btn btn-link text-muted">
                        <i class="mdi mdi-arrow-left me-1"></i> Continue Shopping </a>
                </div> <!-- end col -->
                <div class="col">
                </div> <!-- end col -->
            </div> <!-- end row-->
        </div>
    </div>
    <!-- end row -->
    
</div>

<!-- Checkout-->
        <script src="js/auth.js"></script>

    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-light footer mt-5 py-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-white mb-4">Our Office</h4>
                    <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>123 Street, Irbid, Jordan</p>
                    <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+962 7 9709 0000</p>
                    <p class="mb-2"><i class="fa fa-envelope me-3"></i>Faid@jo.com</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-square btn-outline-light rounded-circle me-2" href=""><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-square btn-outline-light rounded-circle me-2" href=""><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-square btn-outline-light rounded-circle me-2" href=""><i class="fab fa-youtube"></i></a>
                        <a class="btn btn-square btn-outline-light rounded-circle me-2" href=""><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-white mb-4">Services</h4>
                    <a class="btn btn-link" href="">Landscaping</a>
                    <a class="btn btn-link" href="">Pruning plants</a>
                    <a class="btn btn-link" href="">Urban Gardening</a>
                    <a class="btn btn-link" href="">Garden Maintenance</a>
                    <a class="btn btn-link" href="">Green Technology</a>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-white mb-4">Quick Links</h4>
                    <a class="btn btn-link" href="">About Us</a>
                    <a class="btn btn-link" href="">Contact Us</a>
                    <a class="btn btn-link" href="">Our Services</a>
                    <a class="btn btn-link" href="">Terms & Condition</a>
                    <a class="btn btn-link" href="">Support</a>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-white mb-4">Newsletter</h4>
                    <p>Dolor amet sit justo amet elitr clita ipsum elitr est.</p>
                    <div class="position-relative w-100">
                        <input class="form-control bg-light border-light w-100 py-3 ps-4 pe-5" type="text" placeholder="Your email">
                        <button type="button" class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">SignUp</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->





    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square rounded-circle back-to-top"><i class="bi bi-arrow-up"></i></a>






<!--================================-->
<!--address-->
<script>
function loadUserProfile(userId) {
    fetch(`https://localhost:44395/api/Order/address/${userId}`)
        .then(response => response.json())
        .then(data => {
            if (data) {
                document.getElementById('userName').innerText = data.userName;  
                document.getElementById('addressInput').innerText = data.address;  
                document.getElementById('phoneInput').innerText = data.phone;  
                
                if (data.Image) {
                    document.getElementById('userImage').src = data.Image;
                }
            } else {
                console.error('No user data found');
            }
        })
        .catch(error => console.error('Error fetching user profile:', error));
}

loadUserProfile(userId); 

    
</script>
<!--================================-->
<!--paypal-->

<script src="https://www.paypal.com/sdk/js?client-id=AYtvlnz-u4vZBgLnNIHWMpXvNTJI3HHyzmuRvJSGkZa3o3AiB7-N4Tnd4GljGTdHa4oyT3C4ZzEqjAwH&currency=USD"></script>
<!-- <script>
    function togglePaypalBtn() {
        const paypalContainer = document.getElementById('paypal-button-container');
        paypalContainer.style.display = 'block';
        paypal.Buttons({
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: '10.00' 
                        }
                    }]
                });
            },
            
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    alert('Payment Completed ' + details.payer.name.given_name);
                });
            }
        }).render('#paypal-button-container'); 
    }
</script> -->

<script>
    let isPaypalButtonRendered = false; // Flag to track if PayPal button is already rendered

    async function fetchCartItems() {
        const userId = localStorage.getItem('userId');
        let totalAmount = 0;

        try {
            const response = await fetch(`https://localhost:44395/api/Restaurant/cartItem/${userId}`);
            const cartItems = await response.json();
            const cartContainer = document.getElementById('cartItems');
            const totalAmountElem = document.getElementById('totalAmount');
            cartContainer.innerHTML = ''; // Clear existing items

            cartItems.forEach(item => {
                const itemTotal = item.price * item.quantity;
                totalAmount += itemTotal;

                cartContainer.innerHTML += `
                    <div class="cart-item d-flex justify-content-between align-items-center mb-3">
                        <div>${item.foodName} (x${item.quantity})</div>
                        <div>$${itemTotal.toFixed(2)}</div>
                    </div>
                `;
            });

            totalAmountElem.textContent = `$${totalAmount.toFixed(2)}`;
            return totalAmount; // Return the calculated total amount
        } catch (error) {
            console.error('Error fetching cart items:', error);
            alert('An error occurred while fetching cart items.');
        }
    }

    async function togglePaypalBtn() {
        const paypalContainer = document.getElementById('paypal-button-container');
        const totalAmount = await fetchCartItems();

        paypalContainer.style.display = 'block';

        if (!isPaypalButtonRendered) {  // Check if button is not already rendered
            paypal.Buttons({
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: totalAmount.toFixed(2)
                            }
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        alert('Payment Completed, Thank you ' + details.payer.name.given_name);
                    });
                }
            }).render('#paypal-button-container'); 
            isPaypalButtonRendered = true;  // Set the flag to true to prevent re-rendering
        }
    }
</script>

<!--Cash on delivery-->
<script>
    function toggleCashOnDeliveryForm() {
    const form = document.getElementById('cashOnDeliveryForm');
    if (form.classList.contains('d-none')) {
        form.classList.remove('d-none');
    } else {
        form.classList.add('d-none');
    }
}

</script>

<!--Dynamic data-->
<script>
    document.addEventListener("DOMContentLoaded", function() {
    const userId = localStorage.getItem('userId'); 
    const apiUrl = `https://localhost:44395/api/Order/Profile/${userId}`;

    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            if (data) {
                document.getElementById("billing-name").value = data.userName || "";
                document.getElementById("billing-email-address").value = data.email || "";
                document.getElementById("billing-phone").value = data.phone || "";
                document.getElementById("billing-address").value = data.address || "";
                // document.getElementById("billing-city").value = data.BillingCity || "";

            }
        })
        .catch(error => console.error("Error fetching user data:", error));
});

</script>
    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/parallax/parallax.min.js"></script>
    <script src="lib/isotope/isotope.pkgd.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>
    <script src="path/to/auth.js"></script>


    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>

    
</body>

</html>